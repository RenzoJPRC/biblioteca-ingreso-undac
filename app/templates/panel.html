{% extends "base_admin.html" %}

{% block title %}Panel - Biblioteca UNDAC{% endblock %}

{% block header_title %}Resumen General{% endblock %}

{% block content %}
<div class="stats-grid">
  <!-- Stat Principal -->
  <div class="card stat-card basic-card">
    <h3>Ingresos Hoy</h3>
    <div class="stat-huge">{{ total_hoy }}</div>
  </div>

  <!-- Por Piso -->
  <div class="card stat-card p-0">
    <div class="card-head">
      <h3>Por Piso</h3>
    </div>
    <ul class="list-stat">
      {% for r in por_piso %}
      <li>
        <span class="stat-label">Piso {{ r.piso }}</span>
        <span class="stat-val">{{ r.total }}</span>
      </li>
      {% else %}
      <li class="empty-stat">Sin datos aún</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Por Turno -->
  <div class="card stat-card p-0">
    <div class="card-head">
      <h3>Por Turno</h3>
    </div>
    <ul class="list-stat">
      {% for r in por_turno %}
      <li>
        <span class="stat-label">{{ r.turno }}</span>
        <span class="stat-val">{{ r.total }}</span>
      </li>
      {% else %}
      <li class="empty-stat">Sin datos aún</li>
      {% endfor %}
    </ul>
  </div>
</div>

<!-- Gráfico -->
<div class="card chart-card">
  <h3>Afluencia por Hora</h3>
  <div class="chart-container">
    <canvas id="chartHora"></canvas>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  const labels = {{ chart_labels | tojson }};
  const dataVal = {{ chart_data | tojson }};
  initChart(labels, dataVal);
</script>
{% endblock %}